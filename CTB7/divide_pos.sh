# starndard data split
#
# train: 31131 sen (reported) -> 31110 (aucual) | 31042 (remove empty)
#   81-143,175-202,234-270,429-454,500-554,590,593-596,600-612,618-642,674-885,1001-1008,1021,1037-1043,
#   1045-1059,1062-1071,1073-1078,1100-1117,1130-1131,1133-1140,1143-1147,1149-1151,2011-2109,2221-2269,
#   2331-2509,2641-2759,2846-3039,4000-4029,4071-4083,4088-4089,4092-4095,4098-4105,4116-4117,4122-4126,
#   4129-4131,4140-4157,4170-4187,4190-4195,4262-4320,4323-4333,4338-4399
#
# devel: 10136 sen -> 10043 | 10022
#   41-80,203-233,301-325,400-409,591,613-617,643-673,1022-1035,1120-1129,2110-2159,2270-2294,2510-2569,
#   2760-2799,3040-3109,4040-4059,4084-4085,4090,4096,4106-4108,4113-4115,4121,4128,4132,4135,4158-4162,
#   4169,4189,4196,4236-4261,4322,4335-4336,4407-4411
#
# test:  10180 sen -> 10290 | 10244
#   1-40,144-174,271-300,410-428,592,900-931,1009-1020,1036,1044,1060-1061,1072,1118-1119,1132,1141-1142,
#   1148,2000-2010,2160-2220,2295-2330,2570-2640,2800-2845,3110-3145,4030-4039,4060-4070,4086-4087,4091,
#   4097,4109-4112,4118-4120,4127,4133-4134,4136-4139,4163-4168,4188,4197-4235,4321,4334,4337,4400-4406
#
# all: 51447 sen -> 51443 | 51308

# [ref] (Wang 2011) http://www.aclweb.org/anthology/I11-1035


ext=pos
in_dir=LDC2010T07_CTB7/ctb7.0/data/utf-8/postagged/
out_dir=LDC2010T07_CTB7/ctb7.0/processed/pos/

train_ids=()
dev_ids=()
test_ids=()

train_sids=(81 175 234 429 500 590 593 600 618 674 1001 1021 1037 1045 1062 1073 1100 1130 1133 1143 1149 2011 2221 2331 2641 2846 4000 4071 4088 4092 4098 4116 4122 4129 4140 4170 4190 4262 4323 4338)
train_lids=(143 202 270 454 554 590 596 612 642 885 1008 1021 1043 1059 1071 1078 1117 1131 1140 1147 1151 2109 2269 2509 2759 3039 4029 4083 4089 4095 4105 4117 4126 4131 4157 4187 4195 4320 4333 4399)

dev_sids=(41 203 301 400 591 613 643 1022 1120 2110 2270 2510 2760 3040 4040 4084 4090 4096 4106 4113 4121 4128 4132 4135 4158 4169 4189 4196 4236 4322 4335 4407)
dev_lids=(80 233 325 409 591 617 673 1035 1129 2159 2294 2569 2799 3109 4059 4085 4090 4096 4108 4115 4121 4128 4132 4135 4162 4169 4189 4196 4261 4322 4336 4411)

test_sids=(1 144 271 410 592 900 1009 1036 1044 1060 1072 1118 1132 1141 1148 2000 2160 2295 2570 2800 3110 4030 4060 4086 4091 4097 4109 4118 4127 4133 4136 4163 4188 4197 4321 4334 4337 4400)
test_lids=(40 174 300 428 592 931 1020 1036 1044 1061 1072 1119 1132 1142 1148 2010 2220 2330 2640 2845 3145 4039 4070 4087 4091 4097 4112 4120 4127 4134 4139 4168 4188 4235 4321 4334 4337 4406)

for ((i=0;i<${#train_sids[@]};i++)); do
    sid=${train_sids[$i]}
    lid=${train_lids[$i]}

    for ((j=${sid};j<=${lid};j++)); do
        train_ids+=( $j )
        # echo tr $j
    done
done

for ((i=0;i<${#dev_sids[@]};i++)); do
    sid=${dev_sids[$i]}
    lid=${dev_lids[$i]}

    for ((j=${sid};j<=${lid};j++)); do
        dev_ids+=( $j )
        # echo de $j
    done
done

for ((i=0;i<${#test_sids[@]};i++)); do
    sid=${test_sids[$i]}
    lid=${test_lids[$i]}

    for ((j=${sid};j<=${lid};j++)); do
        test_ids+=( $j )
        # echo te $j
    done
done

: > ${out_dir}/train.${ext}
for e in ${train_ids[@]}; do
    id4d=`printf %04d $e` 
    if [ -e ${in_dir}/chtb_${id4d}.*.${ext} ]; then
        cat ${in_dir}/chtb_${id4d}.*.${ext} | grep -h -v '^<' | grep -h -v '^$' | grep -h -v 'ＥＭＰＴＹ_VA' >> ${out_dir}/train.${ext}
    fi
done

: > ${out_dir}/dev.${ext}
for e in ${dev_ids[@]}; do
    id4d=`printf %04d $e` 
    if [ -e ${in_dir}/chtb_${id4d}.*.${ext} ]; then
        cat ${in_dir}/chtb_${id4d}.*.${ext} | grep -h -v '^<' | grep -h -v '^$' | grep -h -v 'ＥＭＰＴＹ_VA' >> ${out_dir}/dev.${ext}
    fi
done

: > ${out_dir}/test.${ext}
for e in ${test_ids[@]}; do
    id4d=`printf %04d $e` 
    if [ -e ${in_dir}/chtb_${id4d}.*.${ext} ]; then
        cat ${in_dir}/chtb_${id4d}.*.${ext} | grep -h -v '^<' | grep -h -v '^$' | grep -h -v 'ＥＭＰＴＹ_VA' >> ${out_dir}/test.${ext}
    fi
done

array=("train" "devel" "test")
for ((i=0;i<${#array[@]};i++)); do
    type=${array[i]}
    cat ${out_dir}/${type}.sl | tr ' ' '\n' | tr '_' '\t' > ${out_dir}/${type}.wl
done

cat ${in_dir}/chtb_*.${ext} | grep -h -v '^<' | grep -h -v '^$' > ${out_dir}/all.${ext}
